---
version: 0.1
describe: cross_check_pets

do: [
  page_size: :global.page_size.regular,
  page: 1,

  pets_resp: {
    $invoke: [
      spec: specs.get_pet_all.get_with_page_from_arg, 
      args: [page_size: :page_size, page: :page]
    ]
  },

  total_page: :pets_resp.data.meta.total,

  $for: [
    test: {$compare.lte: [:page, :total_page]},
    do: [
      $invoke: [
        spec: specs.get_pet_all.get_with_page_from_arg, 
        args: [page_size: :page_size, page: :page],
      ],

      $incr: [page, 1],
    ],
  ]
]
