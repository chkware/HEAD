---
version: 0.1
describe: cross_check_pets

vars:
  list_spec: spec.get_pet_all
  page_size: ${global.page_size.regular}
  page: 1

do: |
  # invoke spec

  var(pets_resp, invoke(specs.get_pet_all.get_with_page_from_arg, {page_size: page_size, page: page}))
  
  # get total page
  
  var(total_page, pets_resp.data.meta.total)

  # loop and check if pagination works okay
  
  for(test(page, test.LT, total_page), (
    invoke(specs.get_pet_all.get_with_page_from_arg, {page_size: page_size, page: page})
    incr(page, 1)
  ))
