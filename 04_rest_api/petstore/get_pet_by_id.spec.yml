---
version: 0.1
describe: get_pet_by_id {pet_id?}

specs:
  - it: get_with_number
    default: true
    with: 
      pet_id: 1
    expect: pass
  
  - it: get_with_string
    expect: fail
    with:
      id: 'invalid string'
  
  - it: get_without_id
    expect: fail
    without: [id]
  
  - it: get_with_float
    expect: fail
    with:
      id: 3.5

vars:
  pet_id: 
  server: ${global.server}
  
  # model
  model_pet: {
    "id": "integer",
    "name": "required|string",
    "breed": "required|string|in:cat,dog"
  }

do: |
  # prepare request
  Var url string.Fromat("${}/pets/${}" server pet_id)

  # call api
  Var response (http.GET url)
  Var pet_str response.body

  # parse response to json
  # inharently should call assert.Assert
  Var pet (parse.ParseJson pet_str model_pet)

  # export to caller
  Expose pet
  Expose response
